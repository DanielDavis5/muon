image: alpine/latest
packages:
  - curl-dev
  - libarchive-dev
  - pkgconf-dev
  - samurai
  - python3 # for project tests and meson docs
  - py3-yaml # for meson docs
  - scdoc # for docs of course
  - mandoc # for docs of course
sources:
  - https://git.sr.ht/~lattis/muon
tasks:
  - build: |
      cd muon
      .builds/fullbootstrap.sh
  - test: |
      cd muon
      build/muon -C build test -d dots
artifacts:
  - muon/build/doc/website/website.tar.gz
